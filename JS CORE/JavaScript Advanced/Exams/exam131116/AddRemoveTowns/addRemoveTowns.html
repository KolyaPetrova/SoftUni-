<!-- JS Advanced Exam @ SoftUni - 13-Nov-2016 -->

<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Add / Remove Towns</title>
    <style>select, input { width: 100px }</style>
    <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
</head>

<body onload="attachEvents()">

<div>Towns</div>
<select id="towns" size="4">
    <option>Sofia</option>
    <option>Varna</option>
    <option>Pleven</option>
</select>

<button id="btnDelete">Delete</button>

<div>
    <input type="text" id="newItem" />
    <button id="btnAdd">Add</button>
</div>

<script>
    function attachEvents() {
            $('#btnDelete').click(deleteTowns);

            function deleteTowns() {
                let searchBox = $('#newItem');
                let needle = searchBox.val();
                searchBox.val('');

                let towns = $('#towns').find('option');

                let match = false;
                for (let town of towns) {
                    if (town.selected) {
                        town.remove();
                        match = true;
                    }
                }
            }

        $('#btnAdd').click(addTowns);

        function addTowns() {
            let searchBox = $('#newItem');
            let needle = searchBox.val();
            searchBox.val('');

            let towns = $('#towns');

            towns.append(`<option>${needle}</option>`);

        }
    }
</script>
</body>
</html>
 // TODO: create "selected" property